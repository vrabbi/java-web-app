devDependencies:
- name: foo
  commands:
    install:
      linux: |
        #!/bin/bash
        helm repo add bitnami https://charts.bitnami.com/bitnami
        helm install psql bitnami/postgresql --namespace $KUBETOPUS_NAMESPACE
      windows: |
        helm repo add bitnami https://charts.bitnami.com/bitnami
        helm install psql bitnami/postgresql --namespace $env:KUBETOPUS_NAMESPACE
      mac: |
        #!/bin/bash
        helm repo add bitnami https://charts.bitnami.com/bitnami
        helm install psql bitnami/postgresql --namespace $KUBETOPUS_NAMESPACE
    delete:
      linux: |
        #!/bin/bash
        helm uninstall psql --namespace $KUBETOPUS_NAMESPACE
      windows: |
        helm uninstall psql --namespace $env:KUBETOPUS_NAMESPACE
      mac: |
        #!/bin/bash
        helm uninstall psql --namespace $KUBETOPUS_NAMESPACE
  mappings:
    - source:
        kind: Secret
        name: psql-postgresql
        key:  postgres-password
      target:
        type: envVar
        name: SAMPLE_PASSWORD
    - source:
        kind: Secret
        name: psql-postgresql
        key:  postgres-password
      target:
        type: file
        path: /tmp/db-pass
